<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>cautas - 予定を入れるだけ。あとは全部、繋がる。</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="scroll-container">
    <section class="hero">
      <!-- Scattered Icons -->
      <div class="hero-icon icon-calendar">
        <img src="public/images/icons/icon-calendar.png" alt="カレンダー">
      </div>

      <div class="hero-icon icon-memo">
        <img src="public/images/icons/icon-memo.png" alt="メモ">
      </div>

      <div class="hero-icon icon-mic">
        <img src="public/images/icons/icon-mic.png" alt="マイク">
      </div>

      <div class="hero-icon icon-invoice">
        <img src="public/images/icons/icon-invoice.png" alt="請求書">
      </div>

      <div class="hero-icon icon-clock">
        <img src="public/images/icons/icon-clock.png" alt="時計">
      </div>

      <div class="hero-icon icon-chat">
        <img src="public/images/icons/icon-chat.png" alt="チャット">
      </div>

      <div class="hero-icon icon-chart">
        <img src="public/images/icons/icon-chart.png" alt="グラフ">
      </div>

      <!-- Catchphrase -->
      <div class="hero-catchphrase">
        <h1>予定を入れるだけ。<br>あとは全部、繋がる。</h1>
      </div>
    </section>
  </div>

  <!-- GSAP & ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <script>
    gsap.registerPlugin(ScrollTrigger);

    // ===================================
    // hadaka.jp風 アイコン集約アニメーション
    // 「奥から迫ってくる」演出
    // ===================================

    const icons = document.querySelectorAll('.hero-icon');
    const hero = document.querySelector('.hero');
    const catchphrase = document.querySelector('.hero-catchphrase');

    // 集約後の円形配置（キャッチコピーを囲む）
    const radius = 220;
    const iconCount = icons.length;

    // 各アイコンの設定
    const iconSettings = [
      { name: 'calendar', delay: 0,    speed: 1.0,  startScale: 0.25, endScale: 0.70 },
      { name: 'memo',     delay: 0.06, speed: 1.15, startScale: 0.30, endScale: 0.65 },
      { name: 'mic',      delay: 0.12, speed: 0.95, startScale: 0.20, endScale: 0.60 },
      { name: 'invoice',  delay: 0.04, speed: 1.1,  startScale: 0.28, endScale: 0.70 },
      { name: 'clock',    delay: 0.10, speed: 0.90, startScale: 0.22, endScale: 0.55 },
      { name: 'chat',     delay: 0.02, speed: 1.05, startScale: 0.32, endScale: 0.65 },
      { name: 'chart',    delay: 0.08, speed: 1.0,  startScale: 0.26, endScale: 0.60 }
    ];

    // 初期状態を設定（奥にいる状態）
    icons.forEach((icon, index) => {
      const settings = iconSettings[index];
      gsap.set(icon, {
        scale: settings.startScale,
        opacity: 0.3,
        filter: 'blur(2px)'
      });
    });

    // キャッチコピーも最初は少し薄く
    gsap.set(catchphrase, {
      opacity: 0.6,
      scale: 0.95
    });

    // ScrollTriggerでヒーローセクションをピン留め
    ScrollTrigger.create({
      trigger: ".scroll-container",
      start: "top top",
      end: "+=150%",
      pin: ".hero",
      pinSpacing: false
    });

    // メインタイムライン（スクロール完全連動）
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: ".scroll-container",
        start: "top top",
        end: "+=150%",
        scrub: true,
      }
    });

    // 各アイコンの集約アニメーションを設定
    icons.forEach((icon, index) => {
      const rect = icon.getBoundingClientRect();
      const heroRect = hero.getBoundingClientRect();

      // 画面中央の座標
      const centerX = heroRect.width / 2;
      const centerY = heroRect.height / 2;

      // アイコンの現在の中心座標
      const iconCenterX = rect.left - heroRect.left + rect.width / 2;
      const iconCenterY = rect.top - heroRect.top + rect.height / 2;

      // 円形配置の角度計算（上から時計回り）
      const angle = (index / iconCount) * Math.PI * 2 - Math.PI / 2;
      const targetOffsetX = Math.cos(angle) * radius;
      const targetOffsetY = Math.sin(angle) * radius;

      // 最終移動量
      const targetX = centerX + targetOffsetX - iconCenterX;
      const targetY = centerY + targetOffsetY - iconCenterY;

      const settings = iconSettings[index];

      // 奥から迫ってくるアニメーション
      tl.to(icon, {
        x: targetX,
        y: targetY,
        rotation: 0,
        scale: settings.endScale,
        opacity: 1,
        filter: 'blur(0px)',
        ease: "power3.out",
        duration: settings.speed
      }, settings.delay);
    });

    // キャッチコピーが浮かび上がる
    tl.to(catchphrase, {
      opacity: 1,
      scale: 1,
      ease: "power2.out",
      duration: 0.5
    }, 0.1);

    // キャッチコピーの強調パルス
    tl.to(catchphrase, {
      scale: 1.03,
      ease: "power1.inOut",
      duration: 0.2
    }, 0.7);

    tl.to(catchphrase, {
      scale: 1,
      ease: "power1.out",
      duration: 0.15
    }, 0.9);

    // リサイズ時に再計算
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        ScrollTrigger.refresh();
      }, 250);
    });
  </script>
</body>
</html>
